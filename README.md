# koin - 코인 수익률 대시보드

코인 투자 내역을 관리하고 실시간 수익률을 확인할 수 있는 대시보드입니다.

## 주요 기능

### 📊 대시보드
- 전체 포트폴리오 및 개별 코인별 수익률 실시간 확인
- 매수/매도 거래 내역 관리
- USD/KRW 환율 자동 반영
- 손익률 색상 구분 (수익: 빨간색, 손실: 파란색)

### ➕ 거래 내역 등록
- 매수/매도 구분 등록
- 거래일자, 수량, 금액 기록
- 환율 자동 조회 및 USD 자동 계산

### 📝 거래 내역 관리
- 코인별 상세 거래 내역 조회
- 날짜 범위 및 구분(매수/매도) 필터링
- 거래 내역 수정 및 삭제
- 페이지네이션 지원

## 시작하기

### 필요 사항
- Node.js 18 이상
- Supabase 계정 및 프로젝트

### 1. 프로젝트 설치

```bash
npm install
```

### 2. 환경 변수 설정

프로젝트 루트에 `.env.local` 파일을 생성하고 다음 내용을 추가하세요:

```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

**Supabase 설정 방법:**
1. [Supabase](https://supabase.com)에서 새 프로젝트 생성
2. 프로젝트 설정 > API에서 URL과 anon key 확인
3. 위 환경 변수에 입력

### 3. 데이터베이스 테이블 생성

Supabase SQL Editor에서 다음 SQL을 실행하세요:

```sql
CREATE TABLE public.coin (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE,
  symbol TEXT NULL,
  kr_name TEXT NULL,
  trade_date DATE NULL,
  trade_type TEXT NULL, -- 'B' (매수) 또는 'S' (매도)
  quantity NUMERIC NULL,
  invested_krw BIGINT NULL,
  invested_usd NUMERIC NULL,
  trade_rate NUMERIC NULL,
  CONSTRAINT coin_pkey PRIMARY KEY (id)
);

-- Row Level Security (RLS) 정책 설정
ALTER TABLE public.coin ENABLE ROW LEVEL SECURITY;

-- SELECT 정책 (모든 사용자가 읽기 가능)
CREATE POLICY "Enable read access for all users" 
ON public.coin FOR SELECT 
USING (true);

-- INSERT 정책 (모든 사용자가 추가 가능)
CREATE POLICY "Enable insert access for all users" 
ON public.coin FOR INSERT 
WITH CHECK (true);

-- UPDATE 정책 (모든 사용자가 수정 가능)
CREATE POLICY "Enable update access for all users" 
ON public.coin FOR UPDATE 
USING (true);

-- DELETE 정책 (모든 사용자가 삭제 가능)
CREATE POLICY "Enable delete access for all users" 
ON public.coin FOR DELETE 
USING (true);
```

### 4. 개발 서버 실행

```bash
npm run dev
```

브라우저에서 [http://localhost:3000](http://localhost:3000)을 열어 확인하세요.

## 사용 방법

### 거래 내역 등록
1. 대시보드 우측 상단의 ➕ 버튼 클릭
2. 거래 정보 입력:
   - **구분**: 매수 또는 매도 선택
   - **심볼**: 코인 심볼 (예: BTC, ETH)
   - **한글명**: 코인 한글명 (예: 비트코인, 이더리움)
   - **매수일자**: 거래일자 선택
   - **매입수량**: 구매/판매 수량
   - **매입금액(KRW)**: 원화 금액
3. 매입환율과 매입금액(USD)은 자동으로 계산됩니다
4. **등록** 버튼 클릭

### 거래 내역 조회 및 수정
1. 대시보드에서 원하는 코인 행 클릭
2. 상세 거래 내역 페이지에서:
   - 날짜 범위와 구분으로 필터링 가능
   - 각 거래 내역 클릭 시 수정/삭제 가능
3. 수정 후 **저장** 또는 **삭제** 버튼 클릭

### 대시보드 새로고침
- 대시보드 좌측 상단의 🔄 버튼을 클릭하여 최신 시세로 업데이트

## 화면 구성

### 대시보드
- **전체**: 모든 코인 합계
- **개별 코인**: 각 코인별 상세 정보
  - 손익 (USD/KRW)
  - 수익률 (USD/KRW)
  - 보유 수량
  - 매입가/현재가 (USD/KRW)
  - 매입금액/평가금액 (USD/KRW)
  - 매입환율/현재환율

### 상세 조회
- 거래 내역 목록 (구분, 수량, 금액, 일자)
- 날짜 범위 및 구분 필터
- 페이지네이션 (10개씩)

## 기술 스택

- **프레임워크**: Next.js 14 (App Router)
- **언어**: TypeScript
- **스타일링**: Tailwind CSS
- **데이터베이스**: Supabase (PostgreSQL)
- **가격 API**: CoinPaprika API
- **환율 API**: Naver (manana.kr)

## 배포

### Vercel 배포
1. [Vercel](https://vercel.com)에 프로젝트 연결
2. 환경 변수 설정:
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
3. 배포 완료

## 문제 해결

### 데이터가 표시되지 않을 때
- Supabase RLS 정책이 올바르게 설정되었는지 확인
- 환경 변수가 올바르게 설정되었는지 확인
- 브라우저 콘솔에서 에러 메시지 확인

### 환율이 표시되지 않을 때
- 네트워크 연결 확인
- Naver 환율 API 상태 확인

## 라이선스

이 프로젝트는 개인 사용 목적으로 제작되었습니다.
